webpackJsonp([7],{408:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0__MemoryRouter__=__webpack_require__(391);__webpack_require__.d(__webpack_exports__,"MemoryRouter",function(){return __WEBPACK_IMPORTED_MODULE_0__MemoryRouter__.a});var __WEBPACK_IMPORTED_MODULE_1__Prompt__=__webpack_require__(392);__webpack_require__.d(__webpack_exports__,"Prompt",function(){return __WEBPACK_IMPORTED_MODULE_1__Prompt__.a});var __WEBPACK_IMPORTED_MODULE_2__Redirect__=__webpack_require__(393);__webpack_require__.d(__webpack_exports__,"Redirect",function(){return __WEBPACK_IMPORTED_MODULE_2__Redirect__.a});var __WEBPACK_IMPORTED_MODULE_3__Route__=__webpack_require__(381);__webpack_require__.d(__webpack_exports__,"Route",function(){return __WEBPACK_IMPORTED_MODULE_3__Route__.a});var __WEBPACK_IMPORTED_MODULE_4__Router__=__webpack_require__(364);__webpack_require__.d(__webpack_exports__,"Router",function(){return __WEBPACK_IMPORTED_MODULE_4__Router__.a});var __WEBPACK_IMPORTED_MODULE_5__StaticRouter__=__webpack_require__(394);__webpack_require__.d(__webpack_exports__,"StaticRouter",function(){return __WEBPACK_IMPORTED_MODULE_5__StaticRouter__.a});var __WEBPACK_IMPORTED_MODULE_6__Switch__=__webpack_require__(395);__webpack_require__.d(__webpack_exports__,"Switch",function(){return __WEBPACK_IMPORTED_MODULE_6__Switch__.a});var __WEBPACK_IMPORTED_MODULE_7__matchPath__=__webpack_require__(365);__webpack_require__.d(__webpack_exports__,"matchPath",function(){return __WEBPACK_IMPORTED_MODULE_7__matchPath__.a});var __WEBPACK_IMPORTED_MODULE_8__withRouter__=__webpack_require__(396);__webpack_require__.d(__webpack_exports__,"withRouter",function(){return __WEBPACK_IMPORTED_MODULE_8__withRouter__.a})},441:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(57),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(58),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(59),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(61),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(60),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(16),_react2=_interopRequireDefault(_react),_index=(__webpack_require__(408),__webpack_require__(443)),_index2=_interopRequireDefault(_index),Btn=function(_Component){function Btn(props){(0,_classCallCheck3.default)(this,Btn);var _this=(0,_possibleConstructorReturn3.default)(this,(Btn.__proto__||(0,_getPrototypeOf2.default)(Btn)).call(this,props));return _this.state={},_this}return(0,_inherits3.default)(Btn,_Component),(0,_createClass3.default)(Btn,[{key:"render",value:function(){var _props=this.props,_props$text=_props.text,text=void 0===_props$text?"确定":_props$text,_props$onClick=_props.onClick,_onClick=void 0===_props$onClick?function(){}:_props$onClick,_props$type=_props.type,type=void 0===_props$type?"red":_props$type,_props$style=_props.style,style=void 0===_props$style?{}:_props$style,_props$href=_props.href,href=void 0===_props$href?"":_props$href,typeConfig={red:_index2.default.red,blue:_index2.default.blue,gray:_index2.default.gray,borderRed:_index2.default.borderRed,borderBlue:_index2.default.borderBlue};return href?_react2.default.createElement("a",{className:_index2.default.btn+" "+typeConfig[type],style:style,href:href},text):_react2.default.createElement("div",{className:_index2.default.btn+" "+typeConfig[type],style:style,onClick:function(e){_onClick(e)}},text)}}]),Btn}(_react.Component);exports.default=Btn},442:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(62)(void 0),exports.push([module.i,".index_btn_5EQmiiic{width:360px;height:46px;font-size:16px;line-height:46px;text-align:center;display:block;cursor:pointer}.index_btn_5EQmiiic.index_red_3DWtdoCG{background:#f64c3e;color:#fff}.index_btn_5EQmiiic.index_borderRed_3cJidxZ6{background:#fff;color:#f64c3e;border:1px solid #f64c3e}.index_btn_5EQmiiic.index_blue_1MTT_uDb{background:#4992ec;color:#fff}.index_btn_5EQmiiic.index_borderBlue_21imf4Rg{background:#fff;color:#4992ec;border:1px solid #4992ec}.index_btn_5EQmiiic.index_gray_10SraElD{background:#ccc;color:#fff}",""]),exports.locals={btn:"index_btn_5EQmiiic",red:"index_red_3DWtdoCG",borderRed:"index_borderRed_3cJidxZ6",blue:"index_blue_1MTT_uDb",borderBlue:"index_borderBlue_21imf4Rg",gray:"index_gray_10SraElD"}},443:function(module,exports,__webpack_require__){var content=__webpack_require__(442);"string"==typeof content&&(content=[[module.i,content,""]]);__webpack_require__(63)(content,{});content.locals&&(module.exports=content.locals)},492:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends2=__webpack_require__(141),_extends3=_interopRequireDefault(_extends2),_getPrototypeOf=__webpack_require__(57),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(58),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(59),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(61),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(60),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(16),_react2=_interopRequireDefault(_react),_index=(__webpack_require__(408),__webpack_require__(494)),_index2=_interopRequireDefault(_index),InputComp=function(_Component){function InputComp(props){(0,_classCallCheck3.default)(this,InputComp);var _this=(0,_possibleConstructorReturn3.default)(this,(InputComp.__proto__||(0,_getPrototypeOf2.default)(InputComp)).call(this,props));return _this.state={hasGetCount:0,is60Over:!0,seconds:_this.props.seconds,errMsg:""},_this}return(0,_inherits3.default)(InputComp,_Component),(0,_createClass3.default)(InputComp,[{key:"onChange",value:function(e,value){var _props=this.props,_props$onChange=_props.onChange,onChange=void 0===_props$onChange?function(){}:_props$onChange,_props$validate=_props.validate,validate=void 0===_props$validate?null:_props$validate,val=this.refs.nativeInput.value||"",valied=!0;if(this.setState({errMsg:"",tipMsg:""}),validate){var _ref=validate||{},_ref$required=_ref.required,required=void 0===_ref$required?"":_ref$required,_ref$reg=_ref.reg,reg=void 0===_ref$reg?"":_ref$reg,_ref$regMsg=_ref.regMsg,regMsg=void 0===_ref$regMsg?"":_ref$regMsg;reg&&(reg.test(val)||(valied=!1,this.setState({errMsg:regMsg}))),required&&(val||(valied=!1,this.setState({errMsg:required})))}onChange(val,valied,this)}},{key:"nativeSms",value:function(e){var _this2=this,_props$getSms=this.props.getSms,getSms=void 0===_props$getSms?function(){}:_props$getSms;60==this.state.seconds&&getSms(function(){_this2.startInterval()})}},{key:"startInterval",value:function(){var _this3=this;this.state.seconds>1?(this.setState({seconds:this.state.seconds-1}),setTimeout(function(){_this3.startInterval()},1e3)):this.setState({seconds:60,hasGetCount:this.state.hasGetCount+1})}},{key:"componentDidMount",value:function(){var _props$getInputCompEn=this.props.getInputCompEnv;(void 0===_props$getInputCompEn?function(){}:_props$getInputCompEn)(this)}},{key:"render",value:function(){var _this4=this,_state=this.state,errMsg=_state.errMsg,tipMsg=_state.tipMsg,seconds=_state.seconds,hasGetCount=_state.hasGetCount,_props2=this.props,_props2$type=_props2.type,type=void 0===_props2$type?"text":_props2$type,_props2$placeholder=_props2.placeholder,placeholder=void 0===_props2$placeholder?"":_props2$placeholder,_props2$val=_props2.val,val=void 0===_props2$val?"":_props2$val,_props2$label=_props2.label,label=void 0===_props2$label?"":_props2$label,_props2$tip=_props2.tip,tip=void 0===_props2$tip?tipMsg:_props2$tip,isSms=_props2.isSms,_props2$labelStyle=_props2.labelStyle,labelStyle=void 0===_props2$labelStyle?{}:_props2$labelStyle,_props2$inputStyle=_props2.inputStyle,inputStyle=void 0===_props2$inputStyle?{}:_props2$inputStyle,_props2$style=_props2.style,style=void 0===_props2$style?{}:_props2$style,_props2$maxLength=(_props2.onChange,_props2.maxLength),maxLength=void 0===_props2$maxLength?20:_props2$maxLength,label_Style={width:label?"90px":0};label_Style=(0,_extends3.default)(label_Style,labelStyle);var errorStyle={paddingLeft:label?labelStyle.width||"90px":0},span_style={height:inputStyle.height||"46px",lineHeight:inputStyle.height||"46px"},errorClass=errMsg?_index2.default.error:"",smsCodeTxt=60==seconds?0==hasGetCount?"点击获取":"重新获取":seconds+"s",isSmsDsabled=seconds<60?_index2.default.disabled:"";return _react2.default.createElement("div",{className:_index2.default.inputRow,style:style},_react2.default.createElement("div",{className:_index2.default.inputWrap},label&&_react2.default.createElement("label",{style:label_Style},label),_react2.default.createElement("input",{autoComplete:"new-password",ref:"nativeInput",value:val,type:type,placeholder:placeholder,onChange:function(e){_this4.onChange(e)},className:errorClass,style:inputStyle,required:!0,maxLength:maxLength}),isSms&&_react2.default.createElement("span",{style:span_style,className:_index2.default.smsCode+" "+isSmsDsabled,onClick:function(e){_this4.nativeSms(e)}},smsCodeTxt),this.props.children),_react2.default.createElement("p",{className:errMsg?_index2.default.errorMsg:_index2.default.tipMsg,style:errorStyle},errMsg||tip))}}]),InputComp}(_react.Component);exports.default=InputComp},493:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(62)(void 0),exports.push([module.i,'.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY:after{content:" ";display:table;clear:both;*zoom:1;*display:block}.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY label{line-height:46px;color:#565656;text-align:right;float:left;display:block}.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY input[type*=password],.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY input[type*=text]{width:360px;line-height:44px;border:1px solid #e5e5e5;float:left;min-height:44px;text-indent:10px}.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY input[type*=password]:focus,.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY input[type*=text]:focus{border:1px solid #4992ec}.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY input[type*=password].index_error_rqLW-HJ0,.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY input[type*=text].index_error_rqLW-HJ0{border:1px solid #f64c3e}.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY .index_smsCode_3YSoQ_NI{width:100px;height:46px;line-height:46px;background:#4992ec;color:#fff;text-align:center;float:left;display:block;cursor:pointer}.index_inputRow_3KoyOAaj .index_inputWrap_2U1zLhEY .index_smsCode_3YSoQ_NI.index_disabled_3TAgRIu8{background:#ccc;cursor:auto}.index_inputRow_3KoyOAaj .index_errorMsg_2uJDqx8W{height:30px;font-size:12px;line-height:30px;color:#f64c3e}.index_inputRow_3KoyOAaj .index_tipMsg_1LnmZQNH{height:30px;line-height:30px;color:#ff9b09}',""]),exports.locals={inputRow:"index_inputRow_3KoyOAaj",inputWrap:"index_inputWrap_2U1zLhEY",error:"index_error_rqLW-HJ0",smsCode:"index_smsCode_3YSoQ_NI",disabled:"index_disabled_3TAgRIu8",errorMsg:"index_errorMsg_2uJDqx8W",tipMsg:"index_tipMsg_1LnmZQNH"}},494:function(module,exports,__webpack_require__){var content=__webpack_require__(493);"string"==typeof content&&(content=[[module.i,content,""]]);__webpack_require__(63)(content,{});content.locals&&(module.exports=content.locals)},585:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(91),_regenerator2=_interopRequireDefault(_regenerator),_extends2=__webpack_require__(141),_extends3=_interopRequireDefault(_extends2),_asyncToGenerator2=__webpack_require__(90),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=__webpack_require__(57),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(58),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(59),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(61),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(60),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(16),_react2=_interopRequireDefault(_react),_reactRouterDom=(__webpack_require__(166),__webpack_require__(411)),_reactRedux=__webpack_require__(99),_reactRouter=__webpack_require__(408),_safeCenter=__webpack_require__(638),_safeCenter2=_interopRequireDefault(_safeCenter),_Input=__webpack_require__(492),_Input2=_interopRequireDefault(_Input),_Msg=__webpack_require__(404),_Msg2=_interopRequireDefault(_Msg),_Btn=__webpack_require__(441),_Btn2=_interopRequireDefault(_Btn),_blueimpMd=__webpack_require__(294),_blueimpMd2=_interopRequireDefault(_blueimpMd),_sha=__webpack_require__(295),_sha2=_interopRequireDefault(_sha),_store=__webpack_require__(95),_store2=_interopRequireDefault(_store),_action=__webpack_require__(102),_api=__webpack_require__(149),_api2=_interopRequireDefault(_api),Title=function(_Component){function Title(props){(0,_classCallCheck3.default)(this,Title);var _this=(0,_possibleConstructorReturn3.default)(this,(Title.__proto__||(0,_getPrototypeOf2.default)(Title)).call(this,props));return _this.state={show:_this.props.show,cancel:_this.props.cancel||"取消",update:_this.props.update||"修改"},_this}return(0,_inherits3.default)(Title,_Component),(0,_createClass3.default)(Title,[{key:"componentWillReceiveProps",value:function(props){this.setState({show:props.show,update:this.props.update||"修改"})}},{key:"render",value:function(){var _this2=this;return _react2.default.createElement("div",{className:_safeCenter2.default.info},this.props.label,":",_react2.default.createElement("span",{className:this.props.set}),_react2.default.createElement("span",{className:_safeCenter2.default.val},this.props.val),_react2.default.createElement("a",{className:this.state.show?_safeCenter2.default.cancel:_safeCenter2.default.update,onClick:function(){return _this2.changeShow()}},this.state.show?this.state.cancel:this.state.update))}},{key:"changeShow",value:function(){this.props.onClick(this.state.show),this.setState({show:!this.state.show})}}]),Title}(_react.Component),Phone=function(_Component2){function Phone(props){(0,_classCallCheck3.default)(this,Phone);var _this3=(0,_possibleConstructorReturn3.default)(this,(Phone.__proto__||(0,_getPrototypeOf2.default)(Phone)).call(this,props));return _this3.state={show:!1,phoneShow:!1,phone:_this3.props.phone,code:"",val:_this3.props.val,seconds:60},_this3}return(0,_inherits3.default)(Phone,_Component2),(0,_createClass3.default)(Phone,[{key:"render",value:function(){var _this4=this;return _react2.default.createElement("div",null,_react2.default.createElement(Title,{label:"手机号码",set:_safeCenter2.default.set,val:this.state.val.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"),show:this.state.show,onClick:function(){_this4.Cancle(),_this4.setState({show:!_this4.state.show})}}),_react2.default.createElement("div",{className:_safeCenter2.default.form,style:{display:this.state.show?"block":"none"}},_react2.default.createElement(_Input2.default,{style:{display:this.state.phoneShow?"block":"none"},placeholder:"输入新手机号码",val:this.state.phone,maxLength:"11",onChange:function(val,valied){return _this4.onPhoneChange(val,valied)},validate:{reg:/^1[34578]\d{9}$/,regMsg:"请输入正确手机号"}}),_react2.default.createElement(_Input2.default,{style:{display:this.state.phoneShow?"block":"none"},isSms:"true",placeholder:"输入短信验证码",val:this.state.code,maxLength:"6",inputStyle:{width:"260px"},getSms:function(callback){return _this4.sendCode(callback)},onChange:function(val,valied){return _this4.onCodeChange(val,valied)},seconds:this.state.seconds,validate:{required:"验证码不能为空",reg:/^\d{6}$/,regMsg:"请输入正确验证码"}}),_react2.default.createElement(_Input2.default,{style:{display:this.state.phoneShow?"none":"block"},isSms:"true",placeholder:"输入短信验证码",val:this.state.code,inputStyle:{width:"260px"},maxLength:"6",getSms:function(callback){return _this4.sendCode(callback)},onChange:function(val,valied){return _this4.onCodeChange(val,valied)},seconds:this.state.seconds,validate:{required:"验证码不能为空",reg:/^\d{6}$/,regMsg:"请输入正确验证码"}}),_react2.default.createElement(_Btn2.default,{text:this.state.phoneShow?"完成":"下一步",onClick:function(){return _this4.sub()}})))}},{key:"sub",value:function(){function sub(){return _ref.apply(this,arguments)}var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(){var obj,_obj,userInfo;return _regenerator2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.state.phoneShow){_context.next=7;break}return _context.next=3,_api2.default.get(_api2.default.validateOldMobileVCode,{mobilecode:this.state.code});case 3:obj=_context.sent,1==obj?this.setState({phoneShow:!0,code:"",phone:"",seconds:0}):_store2.default.dispatch((0,_action.setMsg)("验证码输入错误")),_context.next=11;break;case 7:return _context.next=9,_api2.default.post(_api2.default.resetMobile,{mobilecode:this.state.code});case 9:_obj=_context.sent,_obj&&(this.setState({phoneShow:!1,val:this.state.phone,show:!1,code:"",seconds:60}),userInfo=this.props.store.userInfo,this.props.dispatch((0,_action.setUserInfo)((0,_extends3.default)({},userInfo,{regMobile:this.state.phone}))),_store2.default.dispatch((0,_action.setMsg)("手机号码修改成功")),window.location.reload(),window.location.href="/member/index.html#/safeCenter");case 11:case"end":return _context.stop()}},_callee,this)}));return sub}()},{key:"Cancle",value:function(){this.state.show?this.setState({phoneShow:!1,val:this.props.val,show:!1,code:"",seconds:60,phone:this.props.phone}):this.setState({phoneShow:!1,show:!1})}},{key:"sendCode",value:function(){function sendCode(_x){return _ref2.apply(this,arguments)}var _ref2=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(callback){var obj,_obj2;return _regenerator2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(this.state.phoneShow){_context2.next=6;break}return _context2.next=3,_api2.default.get(_api2.default.sendOldMobileVcode,{mobile:this.state.phone});case 3:obj=_context2.sent,_context2.next=9;break;case 6:return _context2.next=8,_api2.default.get(_api2.default.sendNewMobileVcode,{mobile:this.state.phone});case 8:_obj2=_context2.sent;case 9:callback();case 10:case"end":return _context2.stop()}},_callee2,this)}));return sendCode}()},{key:"onPhoneChange",value:function(phone,valied){this.setState({phone:phone})}},{key:"onCodeChange",value:function(code,valied){this.setState({code:code})}},{key:"checkValues",value:function(){this.state.phoneShow}}]),Phone}(_react.Component);Phone=(0,_reactRedux.connect)(function(store){return{store:store}})(Phone);var LoginPwd=function(_Component3){function LoginPwd(props){(0,_classCallCheck3.default)(this,LoginPwd);var _this5=(0,_possibleConstructorReturn3.default)(this,(LoginPwd.__proto__||(0,_getPrototypeOf2.default)(LoginPwd)).call(this,props));return _this5.state={show:!1,oldPwd:"",oldPwdValide:!1,newPwd:"",newPwdValide:!1,okPwd:"",okPwdValide:!1,formValide:!1,validate:{required:"",reg:"",regMsg:""}},_this5}return(0,_inherits3.default)(LoginPwd,_Component3),(0,_createClass3.default)(LoginPwd,[{key:"render",value:function(){var _this6=this;return _react2.default.createElement("div",null,_react2.default.createElement(Title,{label:"登录密码",set:_safeCenter2.default.set,val:"已设置登录密码",show:this.state.show,onClick:function(){return _this6.setState({show:!_this6.state.show,newPwd:"",oldPwd:"",okPwd:"",newPwdValide:!1,oldPwdValide:!1,okPwdValide:!1,formValide:!1})}}),_react2.default.createElement("div",{className:_safeCenter2.default.form,style:{display:this.state.show?"block":"none"}},_react2.default.createElement(_Input2.default,{placeholder:"输入原始密码",val:this.state.oldPwd,type:"password",onChange:function(val,valied,self){return _this6.onOldChange(val,valied,self)},validate:{required:"密码不能为空"}}),_react2.default.createElement(_Input2.default,{placeholder:"输入新密码",val:this.state.newPwd,type:"password",onChange:function(val,valied,self){return _this6.onNewChange(val,valied,self)},validate:{required:"密码不能为空",reg:/^.{6,16}$/g,regMsg:"密码为6-16位字符！"},maxLength:"16"}),_react2.default.createElement(_Input2.default,{placeholder:"确认新密码",val:this.state.okPwd,type:"password",onChange:function(val,valied){return _this6.onOkChange(val,valied)},validate:{required:"密码不能为空",reg:/^.{6,16}$/g,regMsg:"密码为6-16位字符！"},maxLength:"16"}),_react2.default.createElement(_Btn2.default,{type:this.state.formValide?"red":"gray",text:"确认修改",onClick:function(){return _this6.sub()}})),_react2.default.createElement(_Msg2.default,null))}},{key:"sub",value:function(){function sub(){return _ref3.apply(this,arguments)}var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(){var oldPassword,password1,repassword1,Fail,Success,regMobile,oldSaltPass,password,param,obj;return _regenerator2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this.state.formValide){_context3.next=2;break}return _context3.abrupt("return");case 2:if(oldPassword=this.state.oldPwd&&(0,_sha2.default)((0,_blueimpMd2.default)(this.state.oldPwd)),password1=this.state.newPwd&&(0,_sha2.default)((0,_blueimpMd2.default)(this.state.newPwd)),repassword1=this.state.okPwd&&(0,_sha2.default)((0,_blueimpMd2.default)(this.state.okPwd)),Fail=password1!==repassword1,Success=password1===repassword1,!Fail){_context3.next=11;break}_store2.default.dispatch((0,_action.setMsg)("两次密码设置不一致")),_context3.next=24;break;case 11:if(!Success){_context3.next=24;break}return regMobile=this.props.store.userInfo.regMobile,_context3.next=15,_api2.default.saltPass(this.state.oldPwd,regMobile);case 15:return oldSaltPass=_context3.sent,_context3.next=18,_api2.default.saltPass(this.state.newPwd,regMobile);case 18:return password=_context3.sent,param={oldPassword:oldSaltPass,password:password,repassword:password},_context3.next=22,_api2.default.post(_api2.default.ModifyLoginPwd,param);case 22:obj=_context3.sent,obj&&(_store2.default.dispatch((0,_action.setMsg)("登录密码修改成功")),this.setState({show:!1,oldPwd:"",newPwd:"",okPwd:""}));case 24:case"end":return _context3.stop()}},_callee3,this)}));return sub}()},{key:"onOldChange",value:function(oldPwd,valied){var _this7=this;this.setState({oldPwd:oldPwd,oldPwdValide:valied}),setTimeout(function(){_this7.checkValues()},1)}},{key:"onNewChange",value:function(newPwd,valied){var _this8=this;this.setState({newPwd:newPwd,newPwdValide:valied}),setTimeout(function(){_this8.checkValues()},1)}},{key:"onOkChange",value:function(okPwd,valied){var _this9=this;this.setState({okPwd:okPwd,okPwdValide:valied}),setTimeout(function(){_this9.checkValues()},1)}},{key:"checkValues",value:function(){var _state=this.state,oldPwdValide=_state.oldPwdValide,newPwdValide=_state.newPwdValide,okPwdValide=_state.okPwdValide;oldPwdValide&&newPwdValide&&okPwdValide?this.setState({formValide:!0}):this.setState({formValide:!1})}}]),LoginPwd}(_react.Component);LoginPwd=(0,_reactRedux.connect)(function(store){return{store:store}})(LoginPwd);var PayPwd=function(_Component4){function PayPwd(props){(0,_classCallCheck3.default)(this,PayPwd);var _this10=(0,_possibleConstructorReturn3.default)(this,(PayPwd.__proto__||(0,_getPrototypeOf2.default)(PayPwd)).call(this,props));return _this10.state={show:!1,forget:!1,oldPwd:"",oldPwdValide:!1,newPwd:"",newPwdValide:!1,okPwd:"",okPwdValide:!1,formValide:!1,code:"",codeValide:!1,phone:_this10.props.phone,seconds:60,payPwd:_this10.props.store.userInfo.isPayPasWord},_this10}return(0,_inherits3.default)(PayPwd,_Component4),(0,_createClass3.default)(PayPwd,[{key:"render",value:function(){var _this11=this;return _react2.default.createElement("div",null,_react2.default.createElement(Title,{label:"交易密码",set:this.state.payPwd?_safeCenter2.default.set:_safeCenter2.default.unset,val:(this.state.payPwd?"已":"请")+"设置交易密码",show:this.state.show,update:this.state.payPwd?"修改":"设置",onClick:function(){return _this11.setState({show:!_this11.state.show,forget:!1,oldPwd:"",newPwd:"",okPwd:"",code:""})}}),_react2.default.createElement("div",{className:_safeCenter2.default.form,style:{display:this.state.show?"block":"none"}},_react2.default.createElement("div",{style:{display:this.state.payPwd?"block":"none"}},_react2.default.createElement(_Input2.default,{style:{display:this.state.forget?"none":"block"},placeholder:"输入原始交易密码",val:this.state.oldPwd,type:"password",validate:{required:"交易密码不能为空",reg:/^.{6,16}$/g,regMsg:"请输入正确的交易密码！"},maxLength:"16",onChange:function(val,valied){return _this11.onOldChange(val,valied)}},_react2.default.createElement("a",{className:_safeCenter2.default.forget,onClick:function(){return _this11.showForget()}},"忘记原密码?")),_react2.default.createElement(_Input2.default,{style:{display:this.state.forget?"block":"none"},validate:{required:"验证码不能为空",reg:/^\d{6}$/g,regMsg:"请输入正确的短信验证码！"},maxLength:"6",isSms:"true",placeholder:"输入短信验证码",val:this.state.code,inputStyle:{width:"260px"},seconds:this.state.seconds,getSms:function(callback){return _this11.sendCode(callback)},onChange:function(val,valied){return _this11.onCodeChange(val,valied)}})),_react2.default.createElement(_Input2.default,{placeholder:"输入新交易密码",val:this.state.newPwd,type:"password",validate:{required:"交易密码不能为空",reg:/^.{6,16}$/g,regMsg:"请输入正确的交易密码！"},maxLength:"16",onChange:function(val,valied){return _this11.onNewChange(val,valied)}}),_react2.default.createElement(_Input2.default,{placeholder:"确认新交易密码",val:this.state.okPwd,type:"password",validate:{required:"交易密码不能为空",reg:/^.{6,16}$/g,regMsg:"请输入正确的交易密码！"},maxLength:"16",onChange:function(val,valied){return _this11.onOkChange(val,valied)}}),_react2.default.createElement(_Btn2.default,{type:this.state.formValide?"red":"gray",text:this.state.payPwd?"确认修改":"确认设置",onClick:function(){return _this11.sub()}})))}},{key:"sub",value:function(){function sub(){return _ref4.apply(this,arguments)}var _ref4=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(){var oldPassword,password,repassword,mobilecode,Fail,Success,param,obj,_param,_obj3,loginFrom,userInfo,_param2,_obj4;return _regenerator2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(this.state.formValide){_context4.next=2;break}return _context4.abrupt("return");case 2:if(oldPassword=this.state.oldPwd&&(0,_sha2.default)((0,_blueimpMd2.default)(this.state.oldPwd)),password=this.state.newPwd&&(0,_sha2.default)((0,_blueimpMd2.default)(this.state.newPwd)),repassword=this.state.okPwd&&(0,_sha2.default)((0,_blueimpMd2.default)(this.state.okPwd)),mobilecode=this.state.code,Fail=password!==repassword,Success=password===repassword,this.state.forget){_context4.next=25;break}if(!this.state.payPwd){_context4.next=22;break}if(param={oldPassword:oldPassword,password:password,repassword:repassword},!Fail){_context4.next=15;break}_store2.default.dispatch((0,_action.setMsg)("两次密码设置不一致")),_context4.next=20;break;case 15:if(!Success){_context4.next=20;break}return _context4.next=18,_api2.default.post(_api2.default.ModifyPayPwd,param);case 18:obj=_context4.sent,obj&&(_store2.default.dispatch((0,_action.setMsg)("交易密码修改成功")),this.setState({show:!1,oldPwd:"",newPwd:"",okPwd:""}));case 20:_context4.next=23;break;case 22:this.state.payPwd||(_param={password:password,repassword:repassword},Fail?_store2.default.dispatch((0,_action.setMsg)("两次密码设置不一致")):Success&&(_obj3=_api2.default.post(_api2.default.SetPayPwd,_param),_obj3?(loginFrom=this.props.store.loginFrom,this.props.dispatch((0,_action.setLoginFrom)("")),_store2.default.dispatch((0,_action.setMsg)("交易密码设置成功")),this.setState({show:!1,payPwd:!0}),userInfo=this.props.store.userInfo,this.props.dispatch((0,_action.setUserInfo)((0,_extends3.default)({},userInfo,{isPayPasWord:!0}))),setTimeout(function(){location.href=loginFrom},2e3)):_store2.default.dispatch((0,_action.setMsg)("交易密码设置失败"))));case 23:_context4.next=35;break;case 25:if(_param2={mobilecode:mobilecode,password:password,repassword:repassword},!Fail){_context4.next=30;break}_store2.default.dispatch((0,_action.setMsg)("两次密码设置不一致")),_context4.next=35;break;case 30:if(!Success){_context4.next=35;break}return _context4.next=33,_api2.default.post(_api2.default.forgetPayPwd,_param2);case 33:_obj4=_context4.sent,1==_obj4&&(_store2.default.dispatch((0,_action.setMsg)("交易密码修改成功")),this.setState({code:"",newPwd:"",okPwd:"",show:!1,forget:!1}));case 35:case"end":return _context4.stop()}},_callee4,this)}));return sub}()},{key:"sendCode",value:function(){function sendCode(_x2){return _ref5.apply(this,arguments)}var _ref5=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee5(callback){var obj;return _regenerator2.default.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_api2.default.get(_api2.default.getPayCode,{mobile:this.state.phone});case 2:obj=_context5.sent,obj&&callback();case 4:case"end":return _context5.stop()}},_callee5,this)}));return sendCode}()},{key:"showForget",value:function(){var _this12=this;this.setState({forget:!0,oldPwd:"",newPwd:"",okPwd:"",oldPwdValide:!1}),setTimeout(function(){_this12.checkValues()},1)}},{key:"onOldChange",value:function(oldPwd,valied){var _this13=this;this.setState({oldPwd:oldPwd,oldPwdValide:valied}),setTimeout(function(){_this13.checkValues()},1)}},{key:"onNewChange",value:function(newPwd,valied){var _this14=this;this.setState({newPwd:newPwd,newPwdValide:valied}),setTimeout(function(){_this14.checkValues()},1)}},{key:"onOkChange",value:function(okPwd,valied){var _this15=this;this.setState({okPwd:okPwd,okPwdValide:valied}),setTimeout(function(){_this15.checkValues()},1)}},{key:"onCodeChange",value:function(code,valied){var _this16=this;this.setState({code:code,codeValide:valied}),setTimeout(function(){_this16.checkValues()},1)}},{key:"checkValues",value:function(){var _state2=this.state,oldPwdValide=_state2.oldPwdValide,newPwdValide=_state2.newPwdValide,okPwdValide=_state2.okPwdValide,codeValide=_state2.codeValide;!this.state.forget&&this.state.payPwd&&oldPwdValide&&newPwdValide&&okPwdValide||!this.state.forget&&!this.state.payPwd&&newPwdValide&&okPwdValide||this.state.forget&&codeValide&&newPwdValide&&okPwdValide?this.setState({formValide:!0}):this.setState({formValide:!1})}}]),PayPwd}(_react.Component);PayPwd=(0,_reactRedux.connect)(function(store){return{store:store}})(PayPwd);var CunGuanArea=function(props){var _ref6=(props.store.userInfo.realNameStatus,props.info||{}),_ref6$acctName=_ref6.acctName,acctName=void 0===_ref6$acctName?"":_ref6$acctName,_ref6$idNo=_ref6.idNo,idNo=void 0===_ref6$idNo?"":_ref6$idNo,_ref6$cardNo=_ref6.cardNo,cardNo=void 0===_ref6$cardNo?"":_ref6$cardNo,_ref6$preMobile=_ref6.preMobile,preMobile=void 0===_ref6$preMobile?"":_ref6$preMobile,_acctName=acctName.substr(0,1)+(acctName.length>2?"**":"*"),_idNo=idNo.substr(0,6)+"********"+idNo.substr(idNo.length-4,idNo.length),_cardNo=cardNo.substr(0,4)+"********"+cardNo.substr(cardNo.length-4,cardNo.length),_preMobile=preMobile.substr(0,3)+"******"+preMobile.substr(preMobile.length-2,preMobile.length);return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:_safeCenter2.default.hasCunGuanArea},_react2.default.createElement("div",{className:_safeCenter2.default.msg},_react2.default.createElement("div",{className:_safeCenter2.default.left},_react2.default.createElement("p",null,"真实姓名：",_acctName),_react2.default.createElement("p",null,"身份证号：",_idNo)),_react2.default.createElement("div",{className:_safeCenter2.default.right},_react2.default.createElement("p",null,"银行卡号：",_cardNo),_react2.default.createElement("p",null,"银行预留手机号：",_preMobile)))))};CunGuanArea=(0,_reactRedux.connect)(function(store){return{store:store}})(CunGuanArea);var BankUser=function(_Component5){function BankUser(props){(0,_classCallCheck3.default)(this,BankUser);var _this17=(0,_possibleConstructorReturn3.default)(this,(BankUser.__proto__||(0,_getPrototypeOf2.default)(BankUser)).call(this,props));return _this17.state={show:!1,phone:"",set:1==_this17.props.store.userInfo.realNameStatus,cgUserInfoVo:{}},_this17}return(0,_inherits3.default)(BankUser,_Component5),(0,_createClass3.default)(BankUser,[{key:"componentWillMount",value:function(){function componentWillMount(){return _ref7.apply(this,arguments)}var _ref7=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee6(){var otherFinanceData,_ref8,cgUserInfoVo;return _regenerator2.default.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,_api2.default.post(_api2.default.accountIndexOtherInfo);case 2:otherFinanceData=_context6.sent,_ref8=otherFinanceData||{},cgUserInfoVo=_ref8.cgUserInfoVo,this.setState({cgUserInfoVo:cgUserInfoVo});case 5:case"end":return _context6.stop()}},_callee6,this)}));return componentWillMount}()},{key:"render",value:function(){var _this18=this;return _react2.default.createElement("div",null,_react2.default.createElement(Title,{label:"存管账户",set:this.state.set?_safeCenter2.default.set:_safeCenter2.default.unset,val:(this.state.set?"已":"请")+"开通北京银行存管账户",show:this.state.show,cancel:"收起",update:this.state.set?"查看":"开通",onClick:function(){return _this18.setState({show:!_this18.state.show})}}),_react2.default.createElement("div",{className:_safeCenter2.default.form,style:{display:this.state.show?"block":"none"}},_react2.default.createElement("div",{style:{display:this.state.set?"none":"block"}},_react2.default.createElement("div",{className:_safeCenter2.default.bankOpen}),_react2.default.createElement(_Btn2.default,{text:"开通北京银行存管",onClick:function(){return _this18.sub()}})),_react2.default.createElement("div",{style:{display:this.state.set?"block":"none"}},_react2.default.createElement(CunGuanArea,{info:this.state.cgUserInfoVo}))))}},{key:"sub",value:function(){location.href="/openCunGuan.html"}}]),BankUser}(_react.Component);BankUser=(0,_reactRedux.connect)(function(store){return{store:store}})(BankUser);var SafeCenter=function(_Component6){function SafeCenter(props){(0,_classCallCheck3.default)(this,SafeCenter);var _this19=(0,_possibleConstructorReturn3.default)(this,(SafeCenter.__proto__||(0,_getPrototypeOf2.default)(SafeCenter)).call(this,props));return _this19.state={phone:_this19.props.store.userInfo.regMobile},_this19}return(0,_inherits3.default)(SafeCenter,_Component6),(0,_createClass3.default)(SafeCenter,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return _react2.default.createElement("div",{className:_safeCenter2.default.wrap},_react2.default.createElement("p",{className:_safeCenter2.default.title},"个人设置"),_react2.default.createElement(Phone,{val:this.state.phone,phone:this.state.phone}),_react2.default.createElement(LoginPwd,null),_react2.default.createElement(PayPwd,{phone:this.state.phone}),_react2.default.createElement(BankUser,null),_react2.default.createElement("div",null,_react2.default.createElement("div",{className:_safeCenter2.default.info},"风险测评:",_react2.default.createElement("span",{style:{margin:"0 0 0 20px"}},"金服为您打造风险承受能力评估体系，以获得最佳投资体验！"),_react2.default.createElement(_reactRouterDom.NavLink,{className:_safeCenter2.default.goRisk,style:{},to:"/userRiskTest"},"立即评估"))))}}]),SafeCenter}(_react.Component);SafeCenter=(0,_reactRedux.connect)(function(store){return{store:store}})(SafeCenter),exports.default=(0,_reactRouter.withRouter)(SafeCenter)},626:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(62)(void 0),exports.push([module.i,'*{margin:0;padding:0}a{cursor:pointer}.safeCenter_wrap_L0gHdtzo{padding:40px 60px}.safeCenter_wrap_L0gHdtzo .safeCenter_title_2tfXCybi{font-size:18px;color:#222;margin-bottom:20px}.safeCenter_wrap_L0gHdtzo .safeCenter_update_3TJ5K7pR{font-size:14px;color:#4992ec}.safeCenter_wrap_L0gHdtzo .safeCenter_cancel_1k_W7G0z{font-size:14px;color:#f64c3e}.safeCenter_form_9QMsVlcz{border-bottom:1px solid #e5e5e5;padding:20px 80px}.safeCenter_form_9QMsVlcz p{line-height:34px}.safeCenter_forget_1PQTzp12{font-size:14px;line-height:46px;color:#4992ec;margin-left:10px}.safeCenter_icon_1nFhDyel,.safeCenter_set_2g92g8M8,.safeCenter_unset_1NnksO0_{width:18px;height:18px;display:inline-block;margin-left:20px;margin-right:9px;vertical-align:text-bottom}.safeCenter_set_2g92g8M8{background-image:url("/static/img/member/safe_set.png")}.safeCenter_set_2g92g8M8,.safeCenter_unset_1NnksO0_{-webkit-background-size:"100%" "100%";-moz-background-size:"100%";-o-background-size:"100%";background-size:"100%"}.safeCenter_unset_1NnksO0_{background-image:url("/static/img/member/safe_unset.png")}.safeCenter_bankOpen_20CPVWMD{width:189px;height:120px;margin-left:85px;margin-bottom:30px;background-image:url("/static/img/member/safe_bank_open.png");-webkit-background-size:"100%" "100%";-moz-background-size:"100%";-o-background-size:"100%";background-size:"100%"}.safeCenter_info_1lcwt3UT{padding-top:20px;padding-bottom:10px}.safeCenter_info_1lcwt3UT .safeCenter_val_3RDlhXf6{width:180px;display:inline-block}.safeCenter_info_1lcwt3UT .safeCenter_goRisk_XoabYWlf{color:#4992ec;display:inline-block;margin:0 0 0 30px}',""]),exports.locals={wrap:"safeCenter_wrap_L0gHdtzo",title:"safeCenter_title_2tfXCybi",update:"safeCenter_update_3TJ5K7pR",cancel:"safeCenter_cancel_1k_W7G0z",form:"safeCenter_form_9QMsVlcz",forget:"safeCenter_forget_1PQTzp12",icon:"safeCenter_icon_1nFhDyel",set:"safeCenter_set_2g92g8M8",unset:"safeCenter_unset_1NnksO0_",bankOpen:"safeCenter_bankOpen_20CPVWMD",info:"safeCenter_info_1lcwt3UT",val:"safeCenter_val_3RDlhXf6",goRisk:"safeCenter_goRisk_XoabYWlf"}},638:function(module,exports,__webpack_require__){var content=__webpack_require__(626);"string"==typeof content&&(content=[[module.i,content,""]]);__webpack_require__(63)(content,{});content.locals&&(module.exports=content.locals)}});
