webpackJsonp([12],{425:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(91),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(90),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=__webpack_require__(57),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(58),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(59),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(61),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(60),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(16),_react2=_interopRequireDefault(_react),_Pagination=(__webpack_require__(99),__webpack_require__(427)),Pagination=(_interopRequireDefault(_Pagination),__webpack_require__(408),function(_Component){function Pagination(props){(0,_classCallCheck3.default)(this,Pagination);var _this=(0,_possibleConstructorReturn3.default)(this,(Pagination.__proto__||(0,_getPrototypeOf2.default)(Pagination)).call(this,props));return _this.state={currentPage:1,oldCurrentPage:1,pages:0,loading:!1},_this}return(0,_inherits3.default)(Pagination,_Component),(0,_createClass3.default)(Pagination,[{key:"handleCurrentPage",value:function(){function handleCurrentPage(_x){return _ref.apply(this,arguments)}var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(currentPage){return _regenerator2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.state.loading){_context.next=2;break}return _context.abrupt("return");case 2:if(this.setState({loading:!0}),_context.t0=this.props.onCurrentChange,!_context.t0){_context.next=7;break}return _context.next=7,this.props.onCurrentChange(currentPage);case 7:this.setState({loading:!1});case 8:case"end":return _context.stop()}},_callee,this)}));return handleCurrentPage}()},{key:"onInputChange",value:function(e){var value=e.target.value;if(!/^\d+$/.test(value))return this.setState({currentPage:0}),!1;value<=this.props.pages?(this.setState({currentPage:1*value}),value<=0&&this.setState({currentPage:1})):this.setState({currentPage:this.props.pages||1})}},{key:"onInputBlur",value:function(e){var value=e.target.value;value&&0!=value?this.handleCurrentPage(this.state.currentPage):(this.setState({currentPage:1}),this.handleCurrentPage(1))}},{key:"onInputKeyUp",value:function(e){var _this2=this;13==e.keyCode&&setTimeout(function(){var nowPage=_this2.state.currentPage;nowPage&&0!=nowPage||(nowPage=1),_this2.setState({currentPage:nowPage,oldCurrentPage:nowPage}),_this2.handleCurrentPage(_this2.state.currentPage)},2)}},{key:"clickPrev",value:function(){if(1==this.state.currentPage)return!1;var nowPage=this.state.currentPage-1;this.handleCurrentPage(nowPage),this.setState({currentPage:nowPage,oldCurrentPage:nowPage})}},{key:"clickNext",value:function(){if(this.state.currentPage==this.props.pages||!this.props.pages)return!1;var nowPage=this.state.currentPage+1;this.handleCurrentPage(nowPage),this.setState({currentPage:nowPage,oldCurrentPage:nowPage})}},{key:"clickFirst",value:function(){var nowPage=this.state.currentPage;this.handleCurrentPage(1),this.setState({currentPage:1,oldCurrentPage:nowPage})}},{key:"clickLast",value:function(){var nowPage=this.state.currentPage,pages=this.props.pages;this.handleCurrentPage(pages),this.setState({currentPage:pages,oldCurrentPage:nowPage})}},{key:"componentWillReceiveProps",value:function(props){props.currentPage!=this.state.currentPage&&this.setState({currentPage:props.currentPage})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var _this3=this,_props=this.props,pages=_props.pages,_props$style=_props.style,style=void 0===_props$style?{}:_props$style,currentPage=this.state.currentPage,config={prevText:"上一页",nextText:"下一页"},prevDisabled=1==this.state.currentPage?" disabled":"",nextDisabled=this.state.currentPage==this.props.pages?" disabled":"",prevBtn=_react2.default.createElement("span",{className:"prev "+prevDisabled},_react2.default.createElement("i",{onClick:function(e){_this3.clickFirst(e)}}),_react2.default.createElement("strong",{onClick:function(e){_this3.clickPrev(e)}},config.prevText," ")),nextBtn=_react2.default.createElement("span",{className:"next "+nextDisabled},_react2.default.createElement("strong",{onClick:function(e){_this3.clickNext(e)}},config.nextText)," ",_react2.default.createElement("i",{onClick:function(e){_this3.clickLast(e)}})),go=_react2.default.createElement("label",{className:"go"},_react2.default.createElement("input",{type:"text",value:currentPage,onBlur:function(e){_this3.onInputBlur(e)},onChange:function(e){_this3.onInputChange(e)},onKeyUp:function(e){_this3.onInputKeyUp(e)}})," / ",_react2.default.createElement("span",null,pages));return _react2.default.createElement("div",{className:"pagination",style:style},prevBtn,go,nextBtn)}}]),Pagination}(_react.Component));exports.default=Pagination},426:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(62)(void 0),exports.push([module.i,'.pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:20px;line-height:20px;text-align:center}.pagination .next,.pagination .prev{height:20px;font-size:14px;line-height:16px;color:#4992ec;display:inline-block;margin:0 5px;cursor:pointer}.pagination .next.disabled,.pagination .prev.disabled{color:#888;cursor:auto}.pagination .next i,.pagination .prev i{width:11px;height:16px;display:block;margin:0 5px;cursor:pointer;position:relative}.pagination .next strong,.pagination .prev strong{font-weight:400}.pagination .next{padding-right:25px}.pagination .next i{background-image:url("/static/img/page_next.png");float:right;left:5px}.pagination .next.disabled i,.pagination .next i{background-repeat:no-repeat;-webkit-background-size:11px 16px;-moz-background-size:11px 16px;-o-background-size:11px 16px;background-size:11px 16px;background-position:100%}.pagination .next.disabled i{background-image:url("/static/img/page_next_disabled.png")}.pagination .prev{padding-left:25px}.pagination .prev i{background-image:url("/static/img/page_prev.png");float:left;right:5px}.pagination .prev.disabled i,.pagination .prev i{background-repeat:no-repeat;-webkit-background-size:11px 16px;-moz-background-size:11px 16px;-o-background-size:11px 16px;background-size:11px 16px;background-position:100%}.pagination .prev.disabled i{background-image:url("/static/img/page_prev_disabled.png")}.pagination .go{margin:0 10px;height:20px;line-height:20px}.pagination .go input{width:40px;line-height:20px;border:1px solid #d7d7d7;text-align:center;display:inline-block;margin:0 5px}.pagination .go input:focus{border:1px solid #4992ec}',""])},427:function(module,exports,__webpack_require__){var content=__webpack_require__(426);"string"==typeof content&&(content=[[module.i,content,""]]);__webpack_require__(63)(content,{});content.locals&&(module.exports=content.locals)},616:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _regenerator=__webpack_require__(91),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(90),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_getPrototypeOf=__webpack_require__(57),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(58),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(59),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(61),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(60),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(16),_react2=_interopRequireDefault(_react),_reactRedux=__webpack_require__(99),_reactRouterDom=__webpack_require__(411),_reactRouter=__webpack_require__(408),_message=__webpack_require__(634),_store=(_interopRequireDefault(_message),__webpack_require__(95)),_api=(_interopRequireDefault(_store),__webpack_require__(149)),_api2=_interopRequireDefault(_api),_Pagination=__webpack_require__(425),_Pagination2=_interopRequireDefault(_Pagination),Message=function(_Component){function Message(props){(0,_classCallCheck3.default)(this,Message);var _this=(0,_possibleConstructorReturn3.default)(this,(Message.__proto__||(0,_getPrototypeOf2.default)(Message)).call(this,props));return _this.state={messageList:[],allCurrent:1,allPage:1},_this}return(0,_inherits3.default)(Message,_Component),(0,_createClass3.default)(Message,[{key:"componentWillMount",value:function(){function componentWillMount(){return _ref.apply(this,arguments)}var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(){var obj;return _regenerator2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_api2.default.post(_api2.default.getNoticeList,{token:this.props.store.userInfo.token});case 2:return obj=_context.sent,_context.next=5,this.setState({messageList:obj.recordList,allPage:obj.totalPage});case 5:case"end":return _context.stop()}},_callee,this)}));return componentWillMount}()},{key:"changeAllPage",value:function(){function changeAllPage(_x){return _ref2.apply(this,arguments)}var _ref2=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(current){var obj;return _regenerator2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.setState({allCurrent:current});case 2:return _context2.next=4,_api2.default.post(_api2.default.getNoticeList,{token:this.props.store.userInfo.token,pageNum:current});case 4:return obj=_context2.sent,_context2.next=7,this.setState({messageList:obj.recordList,allPage:obj.totalPage});case 7:case"end":return _context2.stop()}},_callee2,this)}));return changeAllPage}()},{key:"readAll",value:function(){function readAll(){return _ref3.apply(this,arguments)}var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(){return _regenerator2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_api2.default.post(_api2.default.readNotice,{token:this.props.store.userInfo.token});case 2:window.location.reload();case 3:case"end":return _context3.stop()}},_callee3,this)}));return readAll}()},{key:"render",value:function(){var _this2=this,readList=[],notReadList=[];return this.state.messageList.forEach(function(v,i){0==v.status?notReadList.push(_react2.default.createElement("div",{key:i,className:"messageList notRead"},_react2.default.createElement(_reactRouterDom.NavLink,{to:"/message/"+v.id},_react2.default.createElement("p",null,v.title),_react2.default.createElement("span",{style:{float:"right"}},v.createTimes)))):1==v.status&&readList.push(_react2.default.createElement("div",{key:i,className:"messageList hasRead",style:{color:"#999"}},_react2.default.createElement(_reactRouterDom.NavLink,{to:"/message/"+v.id},_react2.default.createElement("p",null,v.title),_react2.default.createElement("span",{style:{float:"right"}},v.createTimes))))}),_react2.default.createElement("div",{className:"message"},_react2.default.createElement("div",{className:"tab"},"消息中心",_react2.default.createElement("span",{onClick:function(){_this2.readAll()}},"全部设为已读")),_react2.default.createElement("div",{className:"messageCon",style:{height:"660px"}},_react2.default.createElement("div",{className:"notReadCon"},notReadList),_react2.default.createElement("div",{className:"hasReadCon"},readList)),this.state.messageList.length?_react2.default.createElement(_Pagination2.default,{key:"0",pages:this.state.allPage,currentPage:this.state.allCurrent,onCurrentChange:function(current){_this2.changeAllPage(current)}}):"")}}]),Message}(_react.Component);Message=(0,_reactRedux.connect)(function(store){return{store:store}})(Message),exports.default=(0,_reactRouter.withRouter)(Message)},622:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(62)(void 0),exports.push([module.i,'.message{padding-left:30px;padding-top:50px;padding-right:30px}.message .tab{height:40px;margin-bottom:21px;font-size:18px;line-height:40px;font-weight:400;color:#222;position:relative;border-bottom:1px solid #e5e5e5}.message .tab>span{font-size:14px;color:#4992ec;position:absolute;right:0;cursor:pointer}.message .messageList{height:55px;font-size:14px;line-height:55px;color:#555;padding-left:38px;border-bottom:1px solid #e5e5e5;background-image:url("/static/img/");background-repeat:no-repeat;background-position:0}.message .messageList p{width:700px;float:left;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.message .messageList a{display:block;width:100%;height:100%}.message .messageList.notRead{background-image:url("/static/img/notread.png")}.message .messageList.hasRead{background-image:url("/static/img/hasread.png")}.message .messageList.hasRead a{color:#999}.message .pagination{margin-top:40px}',""])},634:function(module,exports,__webpack_require__){var content=__webpack_require__(622);"string"==typeof content&&(content=[[module.i,content,""]]);__webpack_require__(63)(content,{});content.locals&&(module.exports=content.locals)}});