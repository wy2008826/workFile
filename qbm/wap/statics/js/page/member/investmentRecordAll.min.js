define(function(require,exports,module){require("zepto"),require("fastclick"),FastClick.attach(document.body),$(function(){var wapurl=($("#weburl").val(),$("#wapurl").val()),page=1;$("#tabs .col-all-4").on("click",function(){var tabId=$(this).attr("data-id");$(this).addClass("selected").siblings().removeClass("selected"),0==tabId?location.href=wapurl+"/member/investmentRecordAll.html":1==tabId?location.href=wapurl+"/member/investmentRecordReceived.html":2==tabId&&(location.href=wapurl+"/member/investmentRecordRepayment.html")}),require.async("dropload",function(){$("#pageWrap").dropload({scrollArea:window,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh fc-6 fs-24">↓下拉刷新</div>',domUpdate:'<div class="dropload-update fc-6 fs-24">↑释放更新</div>',domLoad:'<div class="dropload-load fc-6 fs-24"><span class="loading"></span>加载中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh fc-6 fs-24">↑上拉可以加载</div>',domLoad:'<div class="dropload-load fc-6 fs-24"><span class="loading"></span>正在加载中</div>',domNoData:'<div class="dropload-noData fc-6 fs-24">已经没有了</div>'},loadUpFn:function(me){$.ajax({type:"get",url:wapurl+"/api/member/getMyInvestmentForAllList.html?type=0&currentPage=1&pageSize=4&randomTime="+(new Date).getTime(),dataType:"jsonp",success:function(data){if($("#totalInterrest").text(data.totalMoney.toFixed(2)),1==data.code){var dataLength=data.myInvestList.length;if(0==dataLength&&1==page)return $("#noData").removeClass("hide"),$("#pageWrap").addClass("hide"),void $(".dropload-down").addClass("hide");$("#pageWrap").removeClass("hide"),$("#noData").addClass("hide"),$(".dropload-down").removeClass("hide"),require.async("artTemplate",function(template){require.async("artTemplateHelper",function(){var html=template("listTpl",data);setTimeout(function(){$("#list").html(html),me.resetload()},300)})}),dataLength<4&&$(".dropload-down").addClass("hide")}else data.code==-2?require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"获取数据失败",className:"layer-tip",time:2,end:function(){location.href=wapurl}})})}):data.code==-1&&require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"访问已超时，请您重新登录",className:"layer-tip",time:2,end:function(){location.href=wapurl+"/passport/login.html"}})})})},error:function(xhr,type){require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"请求数据超时",className:"layer-tip",time:1,end:function(){me.resetload()}})})})}})},loadDownFn:function(me){$.ajax({type:"get",url:wapurl+"/api/member/getMyInvestmentForAllList.html?type=0&currentPage="+page+"&pageSize=4&randomTime="+(new Date).getTime(),dataType:"jsonp",success:function(data){if($("#totalInterrest").text(data.totalMoney.toFixed(2)),1==data.code){var dataLength=data.myInvestList.length;if(0==dataLength&&1==page)return $("#noData").removeClass("hide"),$("#pageWrap").addClass("hide"),void $(".dropload-down").addClass("hide");if($("#pageWrap").removeClass("hide"),$("#noData").addClass("hide"),$(".dropload-down").removeClass("hide"),require.async("artTemplate",function(template){require.async("artTemplateHelper",function(){var html=template("listTpl",data);setTimeout(function(){$("#list").append(html),me.resetload()},300)})}),1==page&&dataLength<4&&$(".dropload-down").addClass("hide"),page+=1,dataLength<4)return me.lock(),void me.noData()}else data.code==-2?require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"获取数据失败",className:"layer-tip",time:2,end:function(){location.href=wapurl}})})}):data.code==-1&&require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"访问已超时，请您重新登录",className:"layer-tip",time:2,end:function(){location.href=wapurl+"/passport/login.html"}})})})},error:function(xhr,type){require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"请求数据超时",className:"layer-tip",time:1,end:function(){me.resetload()}})})})}})},threshold:50})}),$("body").on("click",".record-item",function(){var tenderId=$(this).attr("data-id"),status=$(this).attr("data-status");location.href=wapurl+"/member/investmentRecordDetail.html?tenderId="+tenderId+"&status="+status}),$("#goFinancing").on("click",function(){location.href=wapurl})})});