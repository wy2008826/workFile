define(function(require,exports,module){require("zepto"),require("fastclick");var wx=require("jweixin-1.0.0");FastClick.attach(document.body),$(function(){function regShare(){wx.ready(function(){wx.onMenuShareAppMessage({title:shareTitle,desc:shareDesc,link:shareLink,imgUrl:shareIcon,trigger:function(res){},success:function(res){require.async("layerCss",function(){require.async("layer",function(layer){layer.closeAll()})})},cancel:function(res){require.async("layerCss",function(){require.async("layer",function(layer){layer.closeAll()})})},fail:function(res){require.async("layerCss",function(){require.async("layer",function(layer){layer.closeAll()})})}}),wx.onMenuShareTimeline({title:shareTitle,link:shareLink,imgUrl:shareIcon,trigger:function(res){},success:function(res){require.async("layerCss",function(){require.async("layer",function(layer){layer.closeAll()})})},cancel:function(res){require.async("layerCss",function(){require.async("layer",function(layer){layer.closeAll()})})},fail:function(res){require.async("layerCss",function(){require.async("layer",function(layer){layer.closeAll()})})}})})}function layerTip(msg,time){layer.open({content:"<p class='normal-tip-line'>"+msg+"</p>",className:"layer-tip",time:time})}var weburl=$("#weburl").val(),wapurl=$("#wapurl").val(),wapcdnpath=$("#wapcdnpath").val(),userId=$("#userId").val(),brokers=$("#brokers").val(),phone=($("#weburl").val(),$("#phone").val()),shareTitle="帮助我成为超级经纪人，一起来享收益吧",shareDesc="成为超级经纪人，躺着赚佣金！",shareLink=weburl+"/apiurl/app/invite-reg.html?phone="+phone+"&brokers="+brokers,shareIcon=wapcdnpath+"/images/member/invite/shareIcon.png";wx.config({debug:!1,appId:"$wxconfig.appid",timestamp:"$wxconfig.timestamp",nonceStr:"$wxconfig.nonceStr",signature:"$wxconfig.signature",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),regShare(),require.async("layerCss",function(){require.async("layer",function(layer){$("#inviteBtn").on("click",function(){layer.open({type:1,content:'<img src="'+wapcdnpath+'/images/member/share-tip.png" class="img share_img">',style:"position:fixed; bottom:0; left:0; width:100% !important; height: 100% !important;background-color: rgba(0,0,0,0.7)!important;",className:"contentTransparent"})}),$("body").on("click",".layermbox",function(){layer.closeAll()})})}),$("#goInviteRule").on("click",function(){location.href=wapurl+"/member/inviteRule.html?userId="+userId}),$("#recordlink").on("click",function(){location.href=wapurl+"/member/inviteRecord.html?userId="+userId}),$("#redPacketlink").on("click",function(){location.href=wapurl+"/member/inviteRedPacket.html?userId="+userId}),$("#commissionLink").on("click",function(){location.href=wapurl+"/member/inviteCommission.html?userId="+userId});var $lq_shengji_btn=$(".upgrade_row");$lq_shengji_btn.length>0&&$lq_shengji_btn.on("click",function(){$.ajax({type:"get",url:wapurl+"/wap/receiveUpgradeGift.html",dataType:"jsonp",success:function(data){data.code!=-1?$lq_shengji_btn.html("已领取").addClass("disabled"):layerTip(data.msg)},error:function(){}})}),require.async("artTemplate",function(template){require.async("artTemplateHelper",function(){function inviteList(param){$.ajax({type:"get",url:weburl+"/app/inviteCountRank.html?inviteType="+param,dataType:"jsonp",success:function(data){console.log(data),0==param?data.dataList.length>0?($("#redlistul").removeClass("hide"),$(".nodataprom").addClass("hide"),data.dataList=data.dataList.slice(0,10),$("#redlistul").html(redlist(data))):($("#redlistul").addClass("hide"),$(".nodataprom").removeClass("hide")):1==param&&(data.dataList.length>0?($("#redlistul").removeClass("hide"),$(".nodataprom").addClass("hide"),data.dataList=data.dataList.slice(0,10),data.dataList.forEach(function(item,index){data.dataList[index].userMoney=item.userMoney.toFixed(2)}),$("#redlistul").html(moneyList(data))):($("#redlistul").addClass("hide"),$(".nodataprom").removeClass("hide")))},error:function(){console.log("error")}})}var redlist=template("redlist"),moneyList=template("moneylist");$(".moneytoplist-tab p").click(function(){$(".moneytoplist-tab a").removeClass("change"),$(this).find("a").addClass("change");var index=$(this).index();0==index?($("#select_tringle").removeClass("second"),inviteList("0")):($("#select_tringle").addClass("second"),inviteList("1"))}),inviteList("0")})})})});