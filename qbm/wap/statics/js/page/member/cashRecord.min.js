define(function(require,exports,module){require("zepto"),require("fastclick"),FastClick.attach(document.body),$(function(){var wapurl=$("#wapurl").val(),page=1;require.async("dropload",function(){$("#pageWrap").dropload({scrollArea:window,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh fc-6 fs-24">↓下拉刷新</div>',domUpdate:'<div class="dropload-update fc-6 fs-24">↑释放更新</div>',domLoad:'<div class="dropload-load fc-6 fs-24"><span class="loading"></span>加载中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh fc-6 fs-24">↑上拉可以加载</div>',domLoad:'<div class="dropload-load fc-6 fs-24"><span class="loading"></span>正在加载中</div>',domNoData:'<div class="dropload-noData fc-6 fs-24">已经没有了</div>'},loadUpFn:function(me){var data={code:-2};if(console.log(data),1==data.code){var dataLength=data.dataList.length;if(0==dataLength&&1==page)return $("#noData").removeClass("hide"),$("#pageWrap").addClass("hide"),void $(".dropload-down").addClass("hide");$("#pageWrap").removeClass("hide"),$("#noData").addClass("hide"),$(".dropload-down").removeClass("hide"),require.async("artTemplate",function(template){require.async("artTemplateHelper",function(){var html=template("listTpl",data);setTimeout(function(){$("#list").html(html),me.resetload(),page=2,me.unlock(),me.noData(!1)},300)})}),dataLength<10&&$(".dropload-down").addClass("hide")}else data.code==-2?require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"获取数据失败",className:"layer-tip",time:2,end:function(){location.href=wapurl}})})}):data.code==-1&&require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"访问已超时，请您重新登录",className:"layer-tip",time:2,end:function(){location.href=wapurl+"/passport/login.html"}})})})},loadDownFn:function(me){var data={code:-2};if(1==data.code){var dataLength=data.dataList.length;if(0==dataLength&&1==page)return $("#noData").removeClass("hide"),$("#pageWrap").addClass("hide"),void $(".dropload-down").addClass("hide");if($("#pageWrap").removeClass("hide"),$("#noData").addClass("hide"),$(".dropload-down").removeClass("hide"),require.async("artTemplate",function(template){require.async("artTemplateHelper",function(){var html=template("listTpl",data);setTimeout(function(){$("#list").append(html),me.resetload()},300)})}),1==page&&dataLength<10&&$(".dropload-down").addClass("hide"),page+=1,dataLength<10)return me.lock(),void me.noData()}else data.code==-2?require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"获取数据失败",className:"layer-tip",time:2,end:function(){location.href=wapurl}})})}):data.code==-1&&require.async("layerCss",function(){require.async("layer",function(layer){layer.open({content:"访问已超时，请您重新登录",className:"layer-tip",time:2,end:function(){location.href=wapurl+"/passport/login.html"}})})})},threshold:50})})})});