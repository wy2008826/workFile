define(function(require,exports,module){require("zepto");var template=require("artTemplate");require("fastclick"),FastClick.attach(document.body),$(function(){var App=function(){this.url={weburl:$("#wapurl").val(),planListUrl:"/wap/getTenderRepayProgress.html"},this.getParam=function(key){var location=window.location.href,href=location.substr(location.indexOf("?")+1),reg=new RegExp("(^|&)"+key+"=([^&]*)($|&)"),group=href.match(reg),param=group?decodeURIComponent(href.match(reg)[2]):"";return param},this.init(),this.helpers(),this.loadPlanList(),this.tpl={planTpl:template.compile($("#plan_list_tpl").html())}};App.prototype={init:function(){},helpers:function(){var self=this,flag=self.getParam("flag");template.helper("planStatusClass",function(status,statusInfo){return 0==flag?0==status?" dhk":"":"待回款"==statusInfo?" dhk":""}),template.helper("numberFixed2",function(number){return(1*number).toFixed(2)}),template.helper("statusInfo",function(status,statusInfo){return 0==flag?0==status?"待回款":"已回款":statusInfo})},loadPlanList:function(){function getListCallBack(data){var html=self.tpl.planTpl(data);$("#repaymentUl").append(html)}var self=this,url=self.url.weburl+self.url.planListUrl,param={tenderId:self.getParam("tenderId"),flag:self.getParam("flag")};$.ajax({type:"get",url:url,data:param,dataType:"jsonp",success:function(data){data.result&&getListCallBack(data)},error:function(){console.log("error")}})}};new App})});